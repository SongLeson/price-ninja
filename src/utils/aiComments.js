// AI è¯„ä»·ç”Ÿæˆå™¨ - æ ¹æ®å•†å“ä¿¡æ¯ç”Ÿæˆå¹½é»˜è¯„è¯­

/**
 * ç”Ÿæˆ AI è¯„ä»·
 * @param {Object} product - å•†å“å¯¹è±¡
 * @returns {string} AI è¯„ä»·æ–‡æœ¬
 */
export const generateAIComment = (product) => {
  const { name, supermarket, rating, tags, price, comment } = product
  
  // è¯„åˆ†ç›¸å…³çš„è¯„è¯­æ¨¡æ¿
  const ratingTemplates = {
    1: [
      'è¿™ä¸ªè¯„åˆ†...å»ºè®®ç›´æ¥æ‹‰é»‘!',
      '1åˆ†è­¦å‘Š!è¿™æ˜¯åœ¨æŒ‘æˆ˜ä½ çš„å‘³è•¾åº•çº¿å—?',
      'ä¼ è¯´ä¸­çš„è¸©é›·ç°åœº,å»ºè®®ç»•é“!'
    ],
    2: [
      '2åˆ†?çœ‹æ¥æ˜¯ä¸ª"å‹‡å£«"æ‰æ•¢å°è¯•çš„å•†å“ã€‚',
      'è¿™ä¸ªåˆ†æ•°å‘Šè¯‰æˆ‘ä»¬:æœ‰äº›å‘,è¸©ä¸€æ¬¡å°±å¤Ÿäº†ã€‚',
      'é¿é›·æŒ‡æ•°:âš ï¸âš ï¸âš ï¸'
    ],
    3: [
      'ä¸­è§„ä¸­çŸ©,ä¸åŠŸä¸è¿‡,å±äº"ä¹°äº†ä¸åæ‚”ä½†ä¹Ÿä¸ä¼šå›è´­"ç³»åˆ—ã€‚',
      '3åˆ†çš„çµé­‚æ‹·é—®:åˆ°åº•æ˜¯ä¹°è¿˜æ˜¯ä¸ä¹°?',
      'å¹³å¹³æ— å¥‡çš„ä¸€æ¬¾,å¯ä»¥è€ƒè™‘ä½†ä¸å¼ºæ±‚ã€‚'
    ],
    4: [
      '4åˆ†å¥½è¯„!è¿™ä¸ªå¯ä»¥åŠ å…¥è´­ç‰©è½¦æ”¶è—å¤¹äº†!',
      'ä¸é”™çš„é€‰æ‹©,å€¼å¾—å›è´­!',
      'å“è´¨åœ¨çº¿,æ¨èæŒ‡æ•°:â­â­â­â­'
    ],
    5: [
      'æ»¡åˆ†!è¿™æ˜¯ä»€ä¹ˆç¥ä»™å•†å“?èµ¶ç´§å›¤è´§!',
      '5æ˜Ÿå¥½è¯„!å·²åŠ å…¥"å¿…ä¹°æ¸…å•"!',
      'å®Œç¾!è¿™å°±æ˜¯ä¼ è¯´ä¸­çš„"å®è—å•†å“"!'
    ]
  }
  
  // æ ‡ç­¾ç›¸å…³çš„è¯„è¯­
  const tagComments = {
    'å¤ªç”œ': [
      `çœ‹æ¥${supermarket}çš„ç³–ç½å­è¢«æ‰“ç¿»äº†,ä¸‹æ¬¡è®°å¾—é…æ¯è‹¦å’–å•¡!`,
      'ç”œåˆ°é½!å»ºè®®ç³–å°¿ç—…æ‚£è€…ç»•é“ã€‚',
      'è¿™ä¸ªç”œåº¦...æ€•æ˜¯è¦æŠŠç‰™é½¿ç”œæ‰äº†!'
    ],
    'é¿é›·': [
      `${supermarket}çš„è¿™æ¬¾${name},å»ºè®®åˆ—å…¥"æ°¸ä¹…é»‘åå•"!`,
      'é¿é›·æˆåŠŸ!æ„Ÿè°¢ä½ çš„ç‰ºç‰²,æ‹¯æ•‘äº†æ— æ•°åæ¥è€…ã€‚',
      'è¿™ä¸ªé›·,ä½ å·²ç»æ›¿å¤§å®¶è¸©è¿‡äº†,åŠŸå¾·æ— é‡!'
    ],
    'å›è´­': [
      `${supermarket}çš„${name}å·²æˆä¸ºä½ çš„"å¿ƒå¤´å¥½"!`,
      'å›è´­é¢„è­¦!è¿™æ˜¯è¦æ¸…ç©º${supermarket}çš„åº“å­˜å—?',
      'çœŸçˆ±æ— ç–‘!å»ºè®®åŠå¼ ä¼šå‘˜å¡!'
    ],
    'ä¸æ–°é²œ': [
      `${supermarket}çš„æ–°é²œåº¦ç®¡ç†éœ€è¦åŠ å¼ºå•Š...`,
      'è¿™ä¸ª"æ–°é²œåº¦"...å»ºè®®ç›´æ¥é€€è´§!',
      'çœ‹æ¥æ˜¯åœ¨å†°ç®±é‡Œä½äº†å¾ˆä¹…çš„"è€æœ‹å‹"äº†ã€‚'
    ],
    'é‡å¤§': [
      `${supermarket}è¿™ä¸ªåˆ†é‡,æ˜¯è¦è®©ä½ åƒåˆ°å¤©è’åœ°è€å—?`,
      'é‡å¤§ç®¡é¥±!é€‚åˆ"å¹²é¥­äºº"!',
      'è¿™ä¸ªé‡...å»ºè®®ç»„å›¢è´­ä¹°,ä¸€èµ·åˆ†äº«!'
    ],
    'æ€§ä»·æ¯”é«˜': [
      `Â¥${price}ä¹°åˆ°è¿™ä¸ª,${supermarket}ç®€ç›´æ˜¯åœ¨åšæ…ˆå–„!`,
      'æ€§ä»·æ¯”ä¹‹ç‹!è¿™ä¸ªä»·æ ¼,é—­çœ¼å…¥!',
      'ç‰©ç¾ä»·å»‰çš„å…¸èŒƒ,å¼ºçƒˆæ¨è!'
    ],
    'è„†è“è“': [
      'è„†è„†çš„å£æ„Ÿ,æ¯ä¸€é¢—éƒ½æ˜¯æƒŠå–œ!',
      `${supermarket}çš„è“è“è„†åº¦æ»¡åˆ†,æ¨è!`
    ],
    'è½¯è“è“': [
      'è½¯è½¯çš„...è¿™æ˜¯è“è“è¿˜æ˜¯è“è“æ³¥?',
      'å£æ„Ÿåè½¯,ä¸å–œæ¬¢çš„æ…å…¥ã€‚'
    ]
  }
  
  // è¶…å¸‚ç›¸å…³çš„å¹½é»˜è¯„è¯­
  const supermarketComments = {
    'å±±å§†': 'å±±å§†ä¼šå‘˜åº—å‡ºå“,å“è´¨æœ‰ä¿éšœ!',
    'å¥¥ä¹é½': 'å¥¥ä¹é½çš„æ€§ä»·æ¯”ä¸€å¦‚æ—¢å¾€!',
    'ç›’é©¬': 'ç›’é©¬é²œç”Ÿ,æ–°é²œåˆ°å®¶!',
    'æ°¸è¾‰': 'æ°¸è¾‰è¶…å¸‚,è€ç‰Œä¿¡èµ–!',
    'Costco': 'Costcoçš„é‡...ä½ ç¡®å®šåƒå¾—å®Œå—?'
  }
  
  // ç»„åˆç”Ÿæˆè¯„è¯­
  let aiComment = ''
  
  // 1. æ·»åŠ è¯„åˆ†ç›¸å…³è¯„è¯­
  const ratingComment = ratingTemplates[rating] || ratingTemplates[3]
  aiComment += ratingComment[Math.floor(Math.random() * ratingComment.length)]
  
  // 2. æ·»åŠ æ ‡ç­¾ç›¸å…³è¯„è¯­
  if (tags && tags.length > 0) {
    const mainTag = tags[0] // å–ç¬¬ä¸€ä¸ªæ ‡ç­¾
    if (tagComments[mainTag]) {
      const tagComment = tagComments[mainTag]
      aiComment += ' ' + tagComment[Math.floor(Math.random() * tagComment.length)]
    }
  }
  
  // 3. æ·»åŠ è¶…å¸‚ç›¸å…³è¯„è¯­ (æœ‰ä¸€å®šæ¦‚ç‡)
  if (Math.random() > 0.5 && supermarketComments[supermarket]) {
    aiComment += ' ' + supermarketComments[supermarket]
  }
  
  // 4. å¦‚æœæœ‰ç”¨æˆ·è¯„è®º,æ·»åŠ å›åº”
  if (comment && comment.length > 10) {
    const commentResponses = [
      'çœ‹æ¥ä½ å¯¹è¿™ä¸ªå•†å“æœ‰å¾ˆæ·±çš„æ„Ÿè§¦å•Š!',
      'ä½ çš„è¯„ä»·å¾ˆä¸­è‚¯,ç»™å…¶ä»–äººæä¾›äº†å®è´µå‚è€ƒ!',
      'è¯¦ç»†çš„è¯„ä»·,ç‚¹èµ!'
    ]
    aiComment += ' ' + commentResponses[Math.floor(Math.random() * commentResponses.length)]
  }
  
  return aiComment
}

/**
 * ç”Ÿæˆç®€çŸ­çš„ AI å»ºè®®
 * @param {Object} product - å•†å“å¯¹è±¡
 * @returns {string} AI å»ºè®®
 */
export const generateAISuggestion = (product) => {
  const { rating, tags } = product
  
  if (rating <= 2) {
    return 'ğŸš« AI å»ºè®®:é¿é›·!å»ºè®®å¯»æ‰¾æ›¿ä»£å“ã€‚'
  } else if (rating >= 4) {
    return 'âœ… AI å»ºè®®:å€¼å¾—è´­ä¹°!å¯ä»¥æ”¾å¿ƒå…¥æ‰‹ã€‚'
  } else if (tags.includes('æ€§ä»·æ¯”é«˜')) {
    return 'ğŸ’° AI å»ºè®®:æ€§ä»·æ¯”ä¸é”™,å¯ä»¥å°è¯•ã€‚'
  } else {
    return 'ğŸ¤” AI å»ºè®®:è°¨æ…è´­ä¹°,å»ºè®®å¤šçœ‹çœ‹å…¶ä»–è¯„ä»·ã€‚'
  }
}
